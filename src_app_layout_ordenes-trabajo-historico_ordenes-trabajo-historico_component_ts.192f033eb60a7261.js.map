{"version":3,"file":"src_app_layout_ordenes-trabajo-historico_ordenes-trabajo-historico_component_ts.192f033eb60a7261.js","mappings":"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","sources":["./src/app/layout/ordenes-trabajo-historico/ordenes-trabajo-historico.component.ts","./src/app/layout/ordenes-trabajo-historico/ordenes-trabajo-historico.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit, ViewChild, inject  } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { PrimeNgModule } from '../shared/prime-ng/prime-ng.module';\n\nimport { itemColumn } from 'src/app/interfaces/tablet.interface';\nimport { OrdenTrabajo } from '../../interfaces/tarea.interface';\nimport { TareaService } from '../../services/tarea.service';\nimport { Subscription } from 'rxjs';\nimport { Router } from '@angular/router';\nimport { CustomMessageService } from 'src/app/services/custom-message.service';\nimport { Table } from 'primeng/table';\nimport { environment } from 'src/environments/environment';\nimport { Usuario } from 'src/app/interfaces/login/login-respuesta.interface';\nimport { UsuarioService } from 'src/app/services/auth/usuario.service';\nimport { EnumService } from 'src/app/services/enum.service';\n\n@Component({\n  selector: 'app-ordenes-trabajo-historico',\n  standalone: true,\n  imports: [CommonModule, PrimeNgModule],\n  templateUrl: './ordenes-trabajo-historico.component.html',\n  styleUrls: ['./ordenes-trabajo-historico.component.scss']\n})\nexport class OrdenesTrabajoHistoricoComponent implements OnInit, OnDestroy {\n  @ViewChild('dt') dt: Table | undefined;\n\n  url: string = environment.API_URL;\n\n  totalRecords: number = 0;\n  mostrarDel: number = 1;\n  mostrarAl: number = 10;\n\n  private readonly tareaService: TareaService = inject(TareaService);\n  private readonly router: Router = inject(Router);\n  private readonly usuarioService = inject(UsuarioService);\n  private readonly messageService = inject(CustomMessageService);\n  private readonly enumService = inject(EnumService);\n\n  private subs: Subscription[] = [];\n\n  public cols: itemColumn[] = [];\n  public selectEstadoOrden: any[] = [];\n  public estadoOrdenToSearch: string;\n  public ordenesTrabajo: OrdenTrabajo[] = [];\n\n  public loading = true;\n\n  public valorNulleable;\n  public valorNulleable2;\n\n  public usuarios: Usuario[] = [];\n\n  public usuario: Usuario;\n\n  ngOnInit() {\n    this.cols = [\n      { field: 'nombre', header: 'Nombre' },\n      { field: 'descripcion', header: 'Descripcion' },\n      { field: 'estado', header: 'Estado' },\n      // { field: 'usuario', header: 'Asignado' },\n    ];\n\n    this.usuario = JSON.parse(localStorage.getItem('usuario'))\n\n    // this.cargarUsuarios();\n    this.cargarEstadosOrden()\n  }\n\n  applyFilterGlobal($event: any, stringVal: any) {\n    this.dt!.filterGlobal(\n      ($event.target as HTMLInputElement).value,\n      'contains'\n    );\n  }\n\n  cargarEstadosOrden() {\n    this.subs.push(\n      this.enumService.getEnum('estado_orden_trabajo').subscribe({\n        next: (res) => (this.selectEstadoOrden = res),\n        error: (error) => this.messageService.error(error.error.detail),\n      })\n    );\n  }\n\n  // buscarAsignado(valueToSearch: string) {\n  //   this.dt!.filterGlobal(\n  //     ($event.target as HTMLInputElement).value,\n  //     'contains'\n  //   );\n  // }\n\n  clear(table: Table) {\n    table.clear();\n    (document.getElementById('buscador') as any).value = '';\n    this.valorNulleable = null;\n    // (document.getElementById('buscadorAsignado') as any).value = '';\n  }\n\n  // cargarUsuarios() {\n  //   this.usuarioService.getUsuarios().subscribe({\n  //     next: (res) => {\n  //       console.log(res);\n  //       this.usuarios = res;\n  //     },\n  //     error: (err) => {\n  //       console.error(err);\n  //       this.messageService.error(\n  //         'Hubo un error al cargar el select de usuarios'\n  //       );\n  //     },\n  //   });\n  // }\n\n  loadCustomers(event: any) {\n    console.log(event);\n    this.loading = true;\n\n    const first = event.first ? event.first : 0;\n    const rows = event.rows ? event.rows : 1;\n    const page = first / rows + 1;\n\n    var endPoint =\n      this.url + `/ordenes_trabajo_paginate?page=${page}&itemsPerPage=${rows}`;\n\n    if (event.globalFilter) {\n      endPoint =\n        endPoint +\n        `&nombre=${event.globalFilter}&descripcion=${event.globalFilter}`;\n    }\n\n    // if (\n    //   event.filters['usuario'] &&\n    //   event.filters['usuario'] != undefined &&\n    //   event.filters['usuario'].value != null\n    // ) {\n    //   endPoint = endPoint + `&usuario=${event.filters['usuario'].value}`;\n    // } else if (\n    //   event.filters['usuario'] &&\n    //   event.filters['usuario'][0] != undefined &&\n    //   event.filters['usuario'][0].value != null\n    // ) {\n    //   endPoint = endPoint + `&usuario=${event.filters['usuario'][0].value}`;\n    // }\n\n    endPoint = endPoint + `&usuario=${this.usuario.nombre}`;\n\n    if (\n      event.filters['estado'] &&\n      event.filters['estado'] != undefined &&\n      event.filters['estado'].value != null\n    ) {\n      endPoint = endPoint + `&estado=${event.filters['estado'].value}`;\n    } else if (\n      event.filters['estado'] &&\n      event.filters['estado'][0] != undefined &&\n      event.filters['estado'][0].value != null\n    ) {\n      endPoint = endPoint + `&estado=${event.filters['estado'][0].value.value}`;\n    }\n\n    if (event.sortField) {\n      endPoint = endPoint + `&ordenCampo=${event.sortField}`;\n\n      if (event.sortOrder == 1) {\n        endPoint = endPoint + '&ordenTipo=ASC';\n      }\n\n      if (event.sortOrder == -1) {\n        endPoint = endPoint + '&ordenTipo=DESC';\n      }\n    }\n    this.cargarOrdenesTrabajosP(endPoint, first, rows);\n  }\n\n  cargarOrdenesTrabajosP(url: string, first: number, rows: number) {\n    this.subs.push(\n      this.tareaService.getOrdenesTrabajosPaginadas(url).subscribe(\n        (response) => {\n          console.log(response);\n          this.ordenesTrabajo = response.data;\n          this.loading = false;\n          // this.totalRecords = response.total;\n          this.totalRecords = response.totalItems;\n          this.loading = false;\n          this.mostrarDel = first + 1;\n          this.mostrarAl = this.mostrarDel + rows - 1;\n          if (this.mostrarAl > this.totalRecords) {\n            this.mostrarAl = this.totalRecords;\n          }\n        },\n        (error) => {\n          console.error(error);\n          this.loading = false;\n          this.messageService.error(error.error.detail);\n        }\n      )\n    );\n  }\n\n  ngOnDestroy(): void {\n    // cerramos todas las subscripciones abiertas\n    this.subs.forEach((subscripcion) => {\n      subscripcion.unsubscribe();\n    });\n  }\n\n  navegarAMostrar(id: number): void {\n    console.log(id);\n    sessionStorage.setItem('lastUrlOrden', '/ordenes-trabajos-historico')\n    this.router.navigateByUrl(`ordenes-trabajo/mostrar/${id}`);\n  }\n}\n","<div class=\"grid\">\n  <div class=\"col-12\">\n    <div class=\"card px-6 py-6\">\n      <p-toolbar styleClass=\"toolbar-sin-bordes\">\n        <ng-template pTemplate=\"left\">\n          <div class=\"my-2\">\n            <h2 class=\"mb-0\">Ordenes de Trabajo</h2>\n          </div>\n        </ng-template>\n      </p-toolbar>\n      <hr class=\"mt-1\" />\n\n      <p-table\n        #dt\n        [value]=\"ordenesTrabajo\"\n        [columns]=\"cols\"\n        [lazy]=\"true\"\n        (onLazyLoad)=\"loadCustomers($event)\"\n        [loading]=\"loading\"\n        [paginator]=\"true\"\n        [rows]=\"10\"\n        [rowsPerPageOptions]=\"[10, 20, 30]\"\n        [totalRecords]=\"totalRecords\"\n        [globalFilterFields]=\"['descripcion', 'nombre']\"\n        responsiveLayout=\"scroll\"\n        [showCurrentPageReport]=\"true\"\n        currentPageReportTemplate=\"Del {{ mostrarDel }} al {{\n          mostrarAl\n        }} para {{ totalRecords }} Registros\"\n        selectionMode=\"multiple\"\n        [rowHover]=\"true\"\n        dataKey=\"id\"\n      >\n        <ng-template pTemplate=\"caption\">\n          <div\n            class=\"flex flex-column md:flex-row md:justify-content-between md:align-items-center\"\n          >\n            <!-- <button\n              pButton\n              pRipple\n              type=\"button\"\n              icon=\"pi pi-plus\"\n              class=\"p-button-rounded p-button-success\"\n              [routerLink]=\"['nueva']\"\n            ></button> -->\n            <div\n              class=\"flex flex-column md:flex-row md:justify-content-end md:align-items-center\"\n            >\n              <button\n                pButton\n                label=\"Filtros\"\n                class=\"mr-2 p-button-outlined my-2 md:my-0\"\n                icon=\"pi pi-filter-slash\"\n                (click)=\"clear(dt)\"\n              ></button>\n              <p-dropdown\n                id=\"selctEstado\"\n                [options]=\"selectEstadoOrden\"\n                (onChange)=\"dt.filter($event.value, 'estado', 'contains')\"\n                placeholder=\"Estado\"\n                [(ngModel)]=\"valorNulleable\"\n                [showClear]=\"true\"\n                class=\"mr-2 max-w-full\"\n              >\n              </p-dropdown>\n              <!-- <p-dropdown\n                id=\"selectUsuario\"\n                [options]=\"usuarios\"\n                (onChange)=\"dt.filter($event.value, 'usuario', 'contains')\"\n                placeholder=\"Asignado\"\n                [(ngModel)]=\"valorNulleable2\"\n                [showClear]=\"true\"\n                optionValue=\"nombre\"\n                optionLabel=\"nombre\"\n                [filter]=\"true\"\n                class=\"mr-2 max-w-full\"\n              ></p-dropdown> -->\n              <span class=\"block mt-2 md:mt-0 p-input-icon-left\">\n                <span class=\"p-input-icon-left ml-auto\">\n                  <i class=\"pi pi-search\"></i>\n                  <input\n                    id=\"buscador\"\n                    pInputText\n                    input\n                    type=\"text\"\n                    (input)=\"\n                      dt.filterGlobal($any($event).target.value, 'contains')\n                    \"\n                    placeholder=\"Buscar\"\n                    class=\"max-w-max\"\n                  />\n                </span>\n              </span>\n            </div>\n          </div>\n        </ng-template>\n        <ng-template pTemplate=\"header\">\n          <tr>\n            <ng-container *ngFor=\"let col of cols\">\n              <th\n                *ngIf=\"\n                  col.header !== 'Asignado' && col.header !== 'Estado';\n                  else asigEstado\n                \"\n                [pSortableColumn]=\"col.field\"\n              >\n                {{ col.header }}\n                <p-sortIcon [field]=\"col.field\"></p-sortIcon>\n              </th>\n              <ng-template #asigEstado>\n                <th>\n                  {{ col.header }}\n                  <!-- <p-columnFilter\n                    *ngIf=\"col.header === 'Asignado'\"\n                    type=\"text\"\n                    [field]=\"col.field\"\n                    display=\"menu\"\n                    [showMatchModes]=\"false\"\n                    [showAddButton]=\"false\"\n                    [showOperator]=\"false\"\n                  ></p-columnFilter> -->\n                  <p-columnFilter\n                    *ngIf=\"col.header === 'Estado'\"\n                    [field]=\"col.field\"\n                    matchMode=\"in\"\n                    display=\"menu\"\n                    [showMatchModes]=\"false\"\n                    [showOperator]=\"false\"\n                    [showAddButton]=\"false\"\n                    [showApplyButton]=\"false\"\n                    [showClearButton]=\"false\"\n                  >\n                    <ng-template\n                      pTemplate=\"filter\"\n                      let-value\n                      let-filter=\"filterCallback\"\n                    >\n                      <p-dropdown\n                        [options]=\"selectEstadoOrden\"\n                        placeholder=\"Estado de la Orden\"\n                        (onChange)=\"filter($any($event))\"\n                        class=\"w-3rem\"\n                      ></p-dropdown>\n                    </ng-template>\n                  </p-columnFilter></th\n              ></ng-template>\n            </ng-container>\n          </tr>\n        </ng-template>\n        <ng-template pTemplate=\"body\" let-ordenTrabajo>\n          <tr (click)=\"navegarAMostrar(ordenTrabajo.id)\">\n            <td style=\"min-width: 10rem\" *ngFor=\"let col of cols\">\n              <span class=\"p-column-title\">{{ col.field }} </span>\n              {{ ordenTrabajo[col.field] ? ordenTrabajo[col.field] : 'N/A' }}\n            </td>\n          </tr>\n        </ng-template>\n        <ng-template pTemplate=\"emptymessage\">\n          <tr>\n            <td>*No hay Ordenes de trabajo registradas*</td>\n          </tr>\n        </ng-template>\n      </p-table>\n    </div>\n  </div>\n</div>\n"],"names":["inject","CommonModule","PrimeNgModule","TareaService","Router","CustomMessageService","environment","UsuarioService","EnumService","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","OrdenesTrabajoHistoricoComponent_ng_template_8_Template_button_click_2_listener","ɵɵrestoreView","_r7","ctx_r6","ɵɵnextContext","_r1","ɵɵreference","ɵɵresetView","clear","OrdenesTrabajoHistoricoComponent_ng_template_8_Template_p_dropdown_onChange_3_listener","$event","filter","value","OrdenesTrabajoHistoricoComponent_ng_template_8_Template_p_dropdown_ngModelChange_3_listener","ctx_r9","valorNulleable","ɵɵelement","OrdenesTrabajoHistoricoComponent_ng_template_8_Template_input_input_7_listener","filterGlobal","target","ɵɵadvance","ɵɵproperty","ctx_r2","selectEstadoOrden","col_r12","field","ɵɵtextInterpolate1","header","OrdenesTrabajoHistoricoComponent_ng_template_9_ng_container_1_ng_template_2_p_columnFilter_2_ng_template_1_Template_p_dropdown_onChange_0_listener","restoredCtx","_r22","filter_r20","filterCallback","ctx_r18","ɵɵtemplate","OrdenesTrabajoHistoricoComponent_ng_template_9_ng_container_1_ng_template_2_p_columnFilter_2_ng_template_1_Template","OrdenesTrabajoHistoricoComponent_ng_template_9_ng_container_1_ng_template_2_p_columnFilter_2_Template","ɵɵelementContainerStart","OrdenesTrabajoHistoricoComponent_ng_template_9_ng_container_1_th_1_Template","OrdenesTrabajoHistoricoComponent_ng_template_9_ng_container_1_ng_template_2_Template","ɵɵtemplateRefExtractor","ɵɵelementContainerEnd","_r14","OrdenesTrabajoHistoricoComponent_ng_template_9_ng_container_1_Template","ctx_r3","cols","col_r27","ordenTrabajo_r25","OrdenesTrabajoHistoricoComponent_ng_template_10_Template_tr_click_0_listener","_r30","$implicit","ctx_r29","navegarAMostrar","id","OrdenesTrabajoHistoricoComponent_ng_template_10_td_1_Template","ctx_r4","OrdenesTrabajoHistoricoComponent","constructor","url","API_URL","totalRecords","mostrarDel","mostrarAl","tareaService","router","usuarioService","messageService","enumService","subs","ordenesTrabajo","loading","usuarios","ngOnInit","usuario","JSON","parse","localStorage","getItem","cargarEstadosOrden","applyFilterGlobal","stringVal","dt","push","getEnum","subscribe","next","res","error","detail","table","document","getElementById","loadCustomers","event","console","log","first","rows","page","endPoint","globalFilter","nombre","filters","undefined","sortField","sortOrder","cargarOrdenesTrabajosP","getOrdenesTrabajosPaginadas","response","data","totalItems","ngOnDestroy","forEach","subscripcion","unsubscribe","sessionStorage","setItem","navigateByUrl","selectors","viewQuery","OrdenesTrabajoHistoricoComponent_Query","rf","ctx","OrdenesTrabajoHistoricoComponent_ng_template_4_Template","OrdenesTrabajoHistoricoComponent_Template_p_table_onLazyLoad_6_listener","OrdenesTrabajoHistoricoComponent_ng_template_8_Template","OrdenesTrabajoHistoricoComponent_ng_template_9_Template","OrdenesTrabajoHistoricoComponent_ng_template_10_Template","OrdenesTrabajoHistoricoComponent_ng_template_11_Template","ɵɵpropertyInterpolate3","ɵɵpureFunction0","_c1","_c2","i1","NgForOf","NgIf","i2","Table","i3","PrimeTemplate","SortableColumn","SortIcon","ColumnFilter","i4","ButtonDirective","i5","NgControlStatus","NgModel","i6","Toolbar","i7","InputText","i8","Dropdown","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}